on:
  push:
    branches:

      - main
      - dev

jobs:

 set_environment:

     runs-on: ubuntu-latest
     steps:
     - name: Checkout code
       uses: actions/checkout@v2
     - name: folder selection
       uses: dorny/paths-filter@v2
       id: changes
       with:
           base: "${GITHUB_REF##*/}"
           filters: |
              lavanya:
                - 'myapp/lavanya**'
              pavi:
                - 'myapp/pavi**'
              confd:
                - 'myapp/confd**'
              
          
     - name: Execute commands based on folder name -notfication
       if: steps.changes.outputs.lavanya == 'true'
       run: |
         npx serverless mono --app lavanya --command 'deploy --stage $STAGE'
     
     - name: Execute commands based on folder name -report
       if: steps.changes.outputs.pavi == 'true'
       run: |
         echo "npx serverless mono --app pavi --command"
     - name: Execute commands based on folder name -libs
       if: steps.Folder_selection.outputs.libs == 'true'
       run: |
           AWS_ACCOUNT_ID=${{ secrets.AWS_ACCOUNT_ID }}
           apps=("lavanya" "pavi" )
           for app in "${apps[@]}"; do
                  echo "$app"
           done
    
